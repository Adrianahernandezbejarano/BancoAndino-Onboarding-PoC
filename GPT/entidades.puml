@startuml
!theme plain

skinparam backgroundColor #FEFEFE
skinparam component {
    BackgroundColor<<input>> LightBlue
    BackgroundColor<<process>> LightGreen
    BackgroundColor<<output>> LightYellow
    BackgroundColor<<human>> LightCoral
}

component "Formulario\nDigital" as Form <<input>> {
    [Datos personales]
    [Datos financieros]
    [Datos laborales]
}

component "Documentos\nCargados" as Docs <<input>> {
    [CÃ©dula]
    [RUT]
    [Estados financieros]
    [Certificado laboral]
}

component "OCR/IDP" as OCR <<process>> {
    [Textract]
    [Rekognition]
    [Comprehend]
}

component "Comparador" as Comp <<process>> {
    [Validador de campos]
    [Fuzzy matching]
    [DetecciÃ³n de anomalÃ­as]
}

component "Motor de\nReglas/IA" as Motor <<process>> {
    [Reglas de negocio]
    [ML scoring]
    [Clasificador]
}

component "Reporte" as Report <<output>> {
    [Inconsistencias]
    [Score de riesgo]
    [RecomendaciÃ³n]
}

actor "Analista" as Analyst <<human>>

database "DynamoDB" as DB
storage "S3" as S3

Form --> DB: 1. Almacena
Docs --> S3: 2. Almacena

DB --> OCR: 3. Lee formulario
S3 --> OCR: 4. Lee documentos

OCR --> Comp: 5. Datos extraÃ­dos\n(estructurados)
DB --> Comp: 6. Datos formulario

Comp --> Motor: 7. Inconsistencias\ndetectadas

Motor --> Report: 8. Genera reporte\ncon decisiÃ³n

Report --> DB: 9. Guarda resultados
Report --> S3: 10. Guarda PDF

DB --> Analyst: 11. Consulta casos\npendientes
S3 --> Analyst: 12. Descarga\ndocumentos

Analyst --> DB: 13. Actualiza\ndecisiÃ³n final

note right of OCR
  ExtracciÃ³n inteligente
  de datos de documentos
  usando IA
end note

note right of Comp
  ComparaciÃ³n automÃ¡tica
  con tolerancia a
  variaciones
end note

note right of Motor
  DecisiÃ³n basada en
  reglas + ML
  APROBADO/REVISIÃ“N/RECHAZADO
end note

@enduml
